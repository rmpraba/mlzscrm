<link rel="import" href="..\..\bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-autogrow-textarea/iron-autogrow-textarea.html">
<link rel="import" href="../../bower_components/gold-email-input/gold-email-input.html">
<link rel="import" href="../dateofbirth-datepicker/dateofbirth-datepicker.html">
<link rel="import" href="../admission-datepicker/admission-datepicker.html">
<link rel="import" href="../special-discount-card/special-discount-card.html">
<dom-module id="detailed-enquiry-form">
  <template>
    <div class="row enquiry-form">
      <div class="list-group col-sm-12 panel-body form-category">
        <span class="col-sm-6">
          <paper-input id="searchtext" label="Enter Enquiry Number/Name" value="{{enqno}}">
            <paper-icon-button suffix icon="search" on-click="search" title="Search"></paper-icon-button>
          </paper-input>
        </span>
        <span class="col-sm-5">
          <paper-dropdown-menu id="searchenquiry" label="Select Enquiry No" on-iron-select="FnSelectEnquiry"  style="margin-top: 4%;width:70%;">
            <paper-menu class="dropdown-content"  class="dropdown-content">
              <template  is="dom-repeat" items="{{enquiryarr}}" as="item">
                <paper-item>{{item.enquiry_no}}-{{item.enquiry_name}}</paper-item>
              </template>
            </paper-menu>
          </paper-dropdown-menu>
        </span>
        <span class="col-sm-1">
          <paper-icon-button style="margin-top: 60%; background-color: #AEB6BF;" class="pull-left" icon="add" title="New Enquiry" on-click="newenquriy" id="newenquiry" ></paper-icon-button>
        </span>
        <span class="col-sm-4" hidden$="{{academicyearhide}}">
          <paper-input label="Date of Enquiry" readonly value="{{todaydate}}"></paper-input>
        </span>
        <span class="col-sm-4" hidden$="{{academicyearhide}}">
          <span class="col-sm-6">
            <paper-checkbox id="nextyear1" class="checkbox" on-change="nextyearfhandler"> Next Full Year</paper-checkbox>
          </span>
          <span class="col-sm-6" hidden$="{{academicyearhide}}">
            <paper-checkbox id="midyear1" class="checkbox" on-change="midyearfhandler"> Mid Year</paper-checkbox>
          </span>
        </span>
        <span class="col-sm-4" hidden$="{{academicyearhide}}">
         <paper-input label="Academics Year" id="acyr" readonly  error-message="needs academics year!" allowed-pattern="[a-zA-Z ]" value="{{academicyear}}"></paper-input>
        </span>
      </div>
      <div class="form-group-heading">
        <h4>Student Details</h4>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-4 enquiry-input">
          <paper-input id="fname"  error-message="needs first name!" label="First Name" allowed-pattern="[a-zA-Z ]" value="{{firstname}}"></paper-input>
        </div>
        <div class="col-sm-4 enquiry-input">
          <paper-input id="mname"  error-message="needs middle name!" label="Middle Name" allowed-pattern="[a-zA-Z ]" value="{{middlename}}"></paper-input>
        </div>
        <div class="col-sm-4 enquiry-input">
          <paper-input id="lname"  error-message="needs last name!" label="Last Name" allowed-pattern="[a-zA-Z ]" value="{{lastname}}"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-3 enquiry-input">
          <label>Gender</label>
          <div class="gender">
            <span class="col-sm-6"><paper-checkbox id="dfmale" class="checkbox" on-change="maleHandler">Boy</paper-checkbox></span>
            <span class="col-sm-6"><paper-checkbox  id="dffemale" class="checkbox" on-change="femaleHandler">Girl</paper-checkbox></span>
          </div>
        </div>
        <div class="col-sm-9 enquiry-input">
          <label>Category</label>
          <div style='margin-top: 1%;'>
          <template  is="dom-repeat" items="{{discountarr}}" as="view">
            <special-discount-card code="{{view.id}}" discountname="{{view.discount_type_name}}"></special-discount-card>
          </template>
          </div>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">

        <div class="col-sm-6 enquiry-input" >
          <!--<paper-input id="grade"  error-message="needs grade seeking for!" label="Class Admission Seeking for" value="{{grade}}"></paper-input>-->
          <paper-dropdown-menu label="Select Grade" style="width:70%;">
            <paper-menu id="classes" class="dropdown-content"  on-iron-select="classseeking" attr-for-selected="value" selected="{{grades}}">
              <template  is="dom-repeat" items="{{itemarr}}" as="view">
                <paper-item value="{{view.class}}">{{view.class}}</paper-item>
              </template>
            </paper-menu>
          </paper-dropdown-menu>
        </div>
        <div class="col-sm-6 enquiry-input" >
          <paper-input id="rtereference" error-message="needs last name!" label="RTE Reference Number" value="{{rteno}}"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-4">
           <dateofbirth-datepicker fieldshowdate={{dob}}></dateofbirth-datepicker>
        </div>
        <div class="col-sm-4">
          <paper-input label="Age as on 31st March 2016" value="{{ageofyr}}"></paper-input>
        </div>
        <div class="col-sm-4">
          <paper-dropdown-menu label="Mother Tongue" >
            <paper-menu id="language" class="dropdown-content"  on-iron-select="language" valueattr="value" >
              <paper-item >Assamese</paper-item>
              <paper-item >Bengali</paper-item>
              <paper-item >Bodo</paper-item>
              <paper-item >Dogri</paper-item>
              <paper-item >Gujarati</paper-item>
              <paper-item >Hindi</paper-item>
              <paper-item >Kannada</paper-item>
              <paper-item >Kashmiri</paper-item>
              <paper-item >Konkani</paper-item>
              <paper-item >Maithili</paper-item>
              <paper-item >Malayalam</paper-item>
              <paper-item >Manipuri</paper-item>
              <paper-item >Marathi</paper-item>
              <paper-item >Nepali</paper-item>
              <paper-item >Odia</paper-item>
              <paper-item >Punjabi</paper-item>
              <paper-item >Sanskrit</paper-item>
              <paper-item >Santali</paper-item>
              <paper-item >Sindhi</paper-item>
              <paper-item >Tamil</paper-item>
              <paper-item >Telugu</paper-item>
              <paper-item >Urdu</paper-item>
            </paper-menu>
          </paper-dropdown-menu>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <paper-input label="Presently Studing Grade" id="oldsclass"  error-message="needs currently studying grade!" value="{{oldclass}}"></paper-input>
        </div>
        <div class="col-sm-6">
          <paper-input label="Presently Studing School" id="oldschool" error-message="needs old school details!" value="{{oldschool}}"></paper-input>
        </div>
      </div>
      <div class="form-group-heading">
        <h4>Parent Details</h4>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <paper-input label="Father's Name" id="dadname"  error-message="needs father's name!" allowed-pattern="[a-zA-Z ]" value="{{fathername}}"></paper-input>
        </div>
        <div class="col-sm-6">
          <paper-input id="momname"  error-message="needs mother's name!" label="Mother's Name" allowed-pattern="[a-zA-Z ]" value="{{mothername}}"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <paper-input id="dadedu"  error-message="needs father's qualification!" allowed-pattern="[a-zA-Z ]" label="Father's Qualification" value="{{fatheredu}}"></paper-input>
        </div>
        <div class="col-sm-6">
          <paper-input id="momedu"  error-message="needs mother's qualification!" allowed-pattern="[a-zA-Z ]" label="Mother's Qualification" value="{{motheredu}}"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-2">
          <paper-input id="dadcountrycode"  error-message="needs father's  country code!" label="Country Code" maxlength="5" allowed-pattern="[0-9]" value="{{fathercountrycode}}"></paper-input>
        </div>
        <div class="col-sm-4">
          <paper-input id="dadmob"  error-message="needs father's mobile no!" label="Father's Contact Number" maxlength="10" allowed-pattern="[0-9]" value="{{fathermob}}" on-change="dadmobverify"></paper-input>
        </div>
        <div class="col-sm-2">
          <paper-input id="mothercountrycode"  error-message="needs mother's  country code!" label="Country Code" maxlength="5" allowed-pattern="[0-9]" value="{{mothercountrycode}}"></paper-input>
        </div>
        <div class="col-sm-4">
          <paper-input id="mommob"  error-message="needs mother's mobile no!" label="Mother's Contact Number" maxlength="10" allowed-pattern="[0-9]" value="{{mothermob}}" on-change="mommobverify"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <gold-email-input id="dadmail"  error-message="needs father's email id!" label="Father's Email ID"  value="{{fathermail}}"></gold-email-input>
        </div>
        <div class="col-sm-6">
          <gold-email-input id="mommail" error-message="needs mother's email id!" label="Mother's Email ID"  value="{{mothermail}}"></gold-email-input>
        </div>
      </div>
      <div class="form-group-heading">
        <h4>Work Details</h4>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <div class="col-sm-6">
            <paper-dropdown-menu label="Father's Occupation" >
              <paper-menu id="dadoccupation" class="dropdown-content" on-iron-select="dadoccupation" valueattr="value" >
                <paper-item >Self Employed</paper-item>
                <paper-item >Public Sector</paper-item>
                <paper-item >Private Sector</paper-item>
                <paper-item >Home Maker</paper-item>
                <paper-item >Others</paper-item>
              </paper-menu>
            </paper-dropdown-menu>
          </div>
          <div class="col-md-6" hidden$="{{hidedadothers}}">
            <paper-input id="dadothers" error-message="needs father's job!" allowed-pattern="[a-zA-Z ]" label="Father's Occupation" value="{{fatherotheroccupation}}"></paper-input>
          </div>
        </div>
        <div  hidden$="{{salaryinfo}}">
          <div class="col-sm-6" hidden$="{{fathersalaryinfo}}">
            <paper-input id="dadoff" error-message="needs father's company name!" allowed-pattern="[a-zA-Z ]" label="Organization Name" value="{{fathercompany}}"></paper-input>
          </div>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category" hidden$="{{salaryinfo}}">
        <div>
          <div class="col-sm-6" hidden$="{{fathersalaryinfo}}">
            <paper-input id="dadjob" error-message="needs father's designation!" label="Designation" allowed-pattern="[a-zA-Z ]" value="{{fatherjob}}"></paper-input>
          </div>
          <div id="dadsal" class="col-sm-6">
            <paper-dropdown-menu label="Father's Salary"  hidden$="{{fathersalaryinfo}}">
              <paper-menu id="dadsalary" class="dropdown-content" on-iron-select="dadsalary" valueattr="value" >
                <paper-item >Nil</paper-item>
                <paper-item >< 1 Lakh</paper-item>
                <paper-item >1 Lakh to 2.5 Lakhs</paper-item>
                <paper-item >2.5Lakhs to 5 Lakhs</paper-item>
                <paper-item >> 5 Lakhs</paper-item>
              </paper-menu>
            </paper-dropdown-menu>
          </div>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <div class="col-sm-6">
            <paper-dropdown-menu label="Mother's Occupation" >
              <paper-menu id="motheroccupation" class="dropdown-content" on-iron-select="motheroccupation" valueattr="value" >
                <paper-item >Self Employed</paper-item>
                <paper-item >Public Sector</paper-item>
                <paper-item >Private Sector</paper-item>
                <paper-item >Home Maker</paper-item>
                <paper-item >Others</paper-item>
              </paper-menu>
            </paper-dropdown-menu>
          </div>
          <div class="col-md-6" hidden$="{{hidemotherothers}}">
            <paper-input id="motherothers" error-message="needs mothers's job!" allowed-pattern="[a-zA-Z ]" label="Mother's Occupation" value="{{motherotheroccupation}}"></paper-input>
          </div>
        </div>
        <div class="col-sm-6 pull-right" hidden$="{{mothersalaryinfo}}">
          <paper-input id="momoff" error-message="needs mother's company name!" allowed-pattern="[a-zA-Z ]" label="Organization Name" value="{{mothercompany}}"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category" hidden$="{{salaryinfo}}">
        <div class="col-sm-6" hidden$="{{mothersalaryinfo}}">
          <paper-input id="momjob" error-message="needs mother's designation!" label="Designation" allowed-pattern="[a-zA-Z ]" value="{{motherjob}}"></paper-input>
        </div>
        <div id="momsal" class="col-sm-6"  hidden$="{{mothersalaryinfo}}">
          <paper-dropdown-menu label="Mother's Salary" >
            <paper-menu id="mothersalary" class="dropdown-content" on-iron-select="mothersalary" valueattr="value" >
              <paper-item >Nil</paper-item>
              <paper-item >< 1 Lakh</paper-item>
              <paper-item >1 Lakh to 2.5 Lakhs</paper-item>
              <paper-item >2.5Lakhs to 5 Lakhs</paper-item>
              <paper-item >> 5 Lakhs</paper-item>
            </paper-menu>
          </paper-dropdown-menu>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category" style="margin: 10px 5px;" hidden$="{{guardianinfo}}">
        <paper-checkbox  id="guardianinfo" class="checkbox" on-change="guardianinfoHandler">Need to Store Local Guardian Information ?</paper-checkbox>
      </div>
      <div class="form-group-heading" hidden$="{{hideguardian}}">
        <h4>Guardian Details</h4>
      </div>
      <div class="list-group col-sm-12 panel-body form-category"  hidden$="{{hideguardian}}">
        <div class="col-sm-6">
          <paper-input id="guardianname" error-message="needs guardian's name!" label="Guardian Name" allowed-pattern="[a-zA-Z ]" value="{{guardianname}}"></paper-input>
        </div>
        <div class="col-sm-2">
          <paper-input id="guardiancountrycode" error-message="needs guardian's  country code!" label="Country Code" maxlength="5" allowed-pattern="[0-9]" value="{{guardiancountrycode}}"></paper-input>
        </div>
        <div class="col-sm-4">
          <paper-input id="guardianmobile" error-message="needs gauardian's mobile no!" label="Guardian's Contact Number" maxlength="10" allowed-pattern="[0-9]" value="{{guardianmobile}}" on-change="guardmobverify"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category"  hidden$="{{hideguardian}}">
        <div class="col-sm-6">
          <paper-input id="guardianemail" error-message="needs guardian's email!" label="Guardian Email" value="{{guardianemail}}"></paper-input>
        </div>
      </div>
        <div class="list-group col-sm-12 panel-body form-category" hidden$="{{hideguardian}}">
          <div class="col-sm-6">
            <div class="col-sm-6">
              <paper-dropdown-menu  label="Guardian's Occupation" >
                <paper-menu id="guardianoccupation" class="dropdown-content" on-iron-select="guardianoccupation" valueattr="value" >
                  <paper-item >Self Employed</paper-item>
                  <paper-item >Public Sector</paper-item>
                  <paper-item >Private Sector</paper-item>
                  <paper-item >Home Maker</paper-item>
                  <paper-item >Others</paper-item>
                </paper-menu>
              </paper-dropdown-menu>
            </div>
            <div class="col-sm-6" hidden$="{{hideguardianothers}}">
              <paper-input id="guardianother" error-message="needs guardian's job!" label="Guardian's Occupation" allowed-pattern="[a-zA-Z ]" value="{{guardianotheroccupation}}"></paper-input>
            </div>
          </div>
        <div class="col-sm-6" hidden$="{{guardiansalaryinfo}}">
          <paper-input id="guardianoff" error-message="needs guardian's company name!" allowed-pattern="[a-zA-Z ]" label="Organization Name" value="{{guardiancompany}}"></paper-input>
        </div>
        </div>
      <div class="list-group col-sm-12 panel-body form-category" hidden$="{{guardiansalaryinfo}}">
        <div class="col-sm-6">
          <paper-input id="guardianjob" error-message="needs guardian's designation!" label="Designation" allowed-pattern="[a-zA-Z ]" value="{{guardianjob}}"></paper-input>
        </div>
        <div class="col-sm-6" hidden$="{{guardiansalaryinfo}}">
          <paper-dropdown-menu label="Guardian's Salary" >
            <paper-menu id="guardiansalarys" class="dropdown-content" on-iron-select="guardiansalary" valueattr="value" >
              <paper-item >Nil</paper-item>
              <paper-item >< 1 Lakh</paper-item>
              <paper-item >1 Lakh to 2.5 Lakhs</paper-item>
              <paper-item >2.5Lakhs to 5 Lakhs</paper-item>
              <paper-item >> 5 Lakhs</paper-item>
            </paper-menu>
          </paper-dropdown-menu>
        </div>
      </div>
      <div class="form-group-heading">
        <h4>Residential Address</h4>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-4">
          <paper-input label="Flat/House No" id="flat" error-message="needs flat/House No!" value="{{flat}}"></paper-input>
        </div>
        <div class="col-sm-4">
          <paper-input label="Building Name" id="add1" error-message="needs building name!" value="{{address1}}"></paper-input>
        </div>
        <div class="col-sm-4">
          <paper-input label="Street/Road" id="add2" error-message="needs street/road name!" value="{{address2}}"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-4">
          <paper-input label="Village/Town" id="add3" error-message="needs village/town!" value="{{address3}}"></paper-input>
        </div>
        <div class="col-sm-4">
            <paper-input  id="locality" error-message="needs locality!" label="Enter Location / Landmark" is="" value="{{textvalues}}" on-keydown="FnInputChanged1"></paper-input>
            <paper-listbox class="dropdown-content" id="itemlists" on-iron-select="Fnselected1" valueattr="value">
              <template is="dom-repeat" items="{{itemArray}}" as="item">
                <paper-item value="{{item.itemid}}">{{item.itemdes}}</paper-item>
              </template>
            </paper-listbox>
        </div>
        <div class="col-sm-4">
          <paper-input id="city" allowed-pattern="[a-zA-Z ]" error-message="needs city name!" label="City" value="{{city}}"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-4">
          <paper-input id="state" allowed-pattern="[a-zA-Z ]" error-message="needs state name!" label="State" value="{{state}}"></paper-input>
        </div>
        <div class="col-sm-4">
          <paper-dropdown-menu id="country" label="Select Country" on-iron-select="FnSelectCountry" attr-for-selected="value"  style="margin-top: 3%;">
            <paper-menu class="dropdown-content"  class="dropdown-content">
              <template  is="dom-repeat" items="{{countryarr}}" as="item">
                <paper-item value="{{item.country_codes}}">{{item.country_name}}</paper-item>
              </template>
            </paper-menu>
          </paper-dropdown-menu>
        </div>
        <div class="col-sm-4">
          <paper-input id="pin" error-message="needs pincode!" allowed-pattern="[0-9]" maxlength="6" label="Pincode" value="{{pincode}}"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-4">
         <paper-dropdown-menu hidden={{enqsource1}} label="Enquiry Source" on-iron-select="source" attr-for-selected="value"  style="margin-top: 3%;">
            <paper-menu class="dropdown-content" id="source"  class="dropdown-content">
              <template  is="dom-repeat" items="{{sourcearr}}"  as="item" selected={{enqsource}}>
                <paper-item>{{item.source}}</paper-item>
              </template>
            </paper-menu>
          </paper-dropdown-menu>
          <paper-input hidden={{enqsource2}} readonly value={{enqsource}}></paper-input>
        </div>
        <div class="col-sm-4" id="sibname">
          <paper-input  label="Names of sibling" value="{{siblingname}}"></paper-input>
        </div>
        <div class="col-sm-4" id="sibdetail">
          <paper-input  label="Grade of sibling" value="{{siblingdetails}}"></paper-input>
        </div>
        <div class="col-sm-4" id="referrer">
          <paper-input  error-message="needs referrer!" label="Enter referrer name.." is="" value="{{referrername}}" on-keydown="FnInputChanged"></paper-input>
          <paper-listbox class="dropdown-content" id="itemlist" on-iron-select="Fnselected" valueattr="value">
            <template is="dom-repeat" items="{{itemArray}}" as="item">
              <paper-item >{{item.itemdes}}</paper-item>
            </template>
          </paper-listbox>
        </div>
      </div>
      <div class="form-group-heading">
        <h4>Admission Test Details</h4>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-4 enquiry-input">
          <label>Admission Test</label>
          <div class="gender">
            <span class="col-sm-6"><paper-checkbox id="admissiontestyes" class="checkbox" on-change="admissiontestyesHandler" checked>Yes</paper-checkbox></span>
            <span class="col-sm-6"><paper-checkbox  id="admissiontestno" class="checkbox" on-change="admissiontestnoHandler">No</paper-checkbox></span>
          </div>
        </div>
        <div class="col-sm-4 enquiry-input" hidden$="{{admissiondetail}}">
          <label>Test Subjects</label>
          <div class="gender">
            <span class="col-sm-4"><paper-checkbox id="english" class="checkbox" on-change="englishHandler">English</paper-checkbox></span>
            <span class="col-sm-4"><paper-checkbox  id="maths" class="checkbox" on-change="mathsHandler">Maths</paper-checkbox></span>
            <span class="col-sm-4"><paper-checkbox  id="evs" class="checkbox" on-change="evsHandler">EVS</paper-checkbox></span>
          </div>
        </div>
        <div class="col-sm-4 enquiry-input" hidden$="{{admissiondetail}}">
          <div class="gender">
            <admission-datepicker></admission-datepicker>
          </div>
        </div>
      </div>
      <div class="form-group-heading">
        <h4>Language Preferences</h4>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <span class="col-sm-12"><h5>2nd Language</h5></span>
          <span><paper-checkbox class="col-sm-6" id="secondhindi" class="checkbox" on-change="secondhindiHandler">Hindi</paper-checkbox></span>
          <span><paper-checkbox class="col-sm-6" id="secondkannada" class="checkbox" on-change="secondkannadaHandler">Kannada</paper-checkbox></span>
        </div>
        <div class="col-sm-6" id="thirdlanguage">
          <span class="col-sm-12"><h5>3rd Language</h5></span>
          <span><paper-checkbox class="col-sm-3" id="thirdfrench" class="checkbox" on-change="thirdfrenchHandler">French</paper-checkbox></span>
          <span><paper-checkbox class="col-sm-3" id="thirdsanskrit" class="checkbox" on-change="thirdsanskritHandler">Sanskrit</paper-checkbox></span>
          <span><paper-checkbox class="col-sm-3" id="thirdkannada" class="checkbox" on-change="thirdkannadaHandler">Kannada</paper-checkbox></span>
          <span><paper-checkbox class="col-sm-3" id="thirdhindi" class="checkbox" on-change="thirdhindiHandler">Hindi</paper-checkbox></span>
        </div>
      </div>
      <div class="form-group-heading">
        <h4>Facility Details</h4>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          Like to Avail Transport ?<span><paper-checkbox id="transportyes" class="checkbox" on-change="transportHandleryes">Yes</paper-checkbox></span>
          <span><paper-checkbox id="transportno" class="checkbox" on-change="transportHandlerno">No</paper-checkbox></span>
        </div>
        <div class="col-sm-6">
        Like to Avail Canteen Facility ?
          <span><paper-checkbox id="canteenyes" class="checkbox" on-change="canteenHandleryes">Yes</paper-checkbox></span>
          <span><paper-checkbox id="canteenno" class="checkbox" on-change="canteenHandlerno">No</paper-checkbox></span>
        </div>
      </div>
      <div class="form-group-heading">
        <h4>Prospectus</h4>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          Prospectus sold or not ?
          <span><paper-checkbox id="prosoldyes" class="checkbox" on-change="prosoldHandleryes">Yes</paper-checkbox></span>
          <span><paper-checkbox id="prosoldno" class="checkbox" on-change="prosoldHandlerno">No</paper-checkbox></span>
        </div>
        <div class="col-sm-6">
          <paper-input id="prospectno" label="Prospectus / Admission Number" value="{{prospectusno}}"></paper-input>
        </div>
      </div>
      <div class="col-md-12 form-button">
         <div class="col-sm-6">
          <paper-dropdown-menu label="Attended By" id="rmnames">
            <paper-menu id="class" class="dropdown-content" required on-iron-select="attendedby" valueattr="value" >
              <template  is="dom-repeat" items="{{listnamearr}}" as="view">
                <paper-item >{{view.employee_name}}</paper-item>
              </template>
            </paper-menu>
          </paper-dropdown-menu>
        </div>
      </div>
      <div class="col-md-12 form-button">
        <paper-button id="searchenq" class="btn btn-primary" on-click="submit">SUBMIT</paper-button>
        <paper-button id="newenq" class="btn btn-primary" on-click="register">REGISTER</paper-button>
      </div>
       <crm-service id="service"></crm-service>
    </div>
  </template>
  <script>
  (function() {
    'use strict';
        var fngender;
        var secondlanguage;
        var thirdlanguage;
        var transportreq;
        var canteenreq;
        var enquiysource;
        var enqno;
        var grade;
        var propsold;
        var mothertongue;
        var dadoccup;
        var guardianoccup;
        var momtheroccup;
        var dadincome;
        var momincome;
        var guardianincome;
        var namearr=[];
        var namearrs=[];
        var dobdate;
        var admissiontestdate;
        var admissiontest;
        var admissiontestenglish="No";
        var admissiontestmaths="No";
        var admissiontestevs="No";
        var rtevalue;
        var enrolltype;
        var yr1;
        var yr2;
        var yearsxz;
        var country_name;
        var checkList=[];
        var attendername;
    Polymer({
      is: 'detailed-enquiry-form',
      ready:function(){
        this.Fnsource(false,true);
        this.$.service.getrmnamelist();
        this.$.service.getenquirysource();
        this.$.searchenq.hidden=false;
        this.$.searchtext.hidden=false;
        this.$.searchenquiry.hidden=false;
        this.$.rtereference.hidden=true;
        this.guardiancountrycode= '91';
       // this.$.service.country();
          this.hideguardian=true;
          this.guardiansalaryinfo=true;
          this.guardianinfo=true;
          this.academicyearhide=true;
          this.$.service.getlocation();
          this.$.service.country();
          this.$.service.getdiscounts();
          this.$.sibname.hidden=true;
          this.$.sibdetail.hidden=true;
          this.$.referrer.hidden=true;
          this.salaryinfo=true;
          this.fathersalaryinfo=true;
          this.mothersalaryinfo=true;/*
          this.$.dadoff.hidden=true;
          this.$.dadjob.hidden=true;
          this.$.dadsal.hidden=true;
          this.$.momoff.hidden=true;
          this.$.momjob.hidden=true;
          this.$.momsal.hidden=true;*/
          this.$.prospectno.hidden=true;
          this.$.newenq.hidden=true;
          this.$.newenquiry.hidden=false;
          this.$.thirdlanguage.hidden=true;
          this.$.itemlist.hidden=true;
          this.$.itemlists.hidden=true;
          var dt=new Date();
          this.todaydate=sessionStorage.getItem("todaydate");
          this.hidedadothers=true;
          this.hidemotherothers=true;
          this.hideguardianothers=true;
          //document.querySelector("#admissiontestyes").checked=true;
          admissiontest="Yes";
          // document.querySelector('#country').selected="Indian";
      },
      country:function(countries){
        this.countryarr=countries;
      },
      FnSelectCountry:function(e){
        var country_codes = (e.target.selectedItem.value);
        country_name = (e.target.selectedItem.textContent).trim();
        this.fathercountrycode = country_codes;
        this.mothercountrycode = country_codes;
      },
      Fnclear:function(){
        this.ready();
          document.getElementById('searchtext').value="";
          document.querySelector('#nextyear').checked=false;
          document.querySelector('#midyear').checked=false;
          this.$.dfmale.checked=false;
          this.$.dffemale.checked=false;
          this.$.searchenquiry.selected=-1;
          this.ageofyr="";
          this.guardianotheroccupation="";
          this.motherotheroccupation="";
          this.fatherotheroccupation="";
          this.$.transportyes.checked=false;
          this.$.transportno.checked=false;
          this.$.canteenyes.checked=false;
          this.$.canteenno.checked=false;
          this.$.prosoldyes.checked=false;
          this.$.prosoldno.checked=false;
          this.$.secondhindi.checked=false;
          this.$.secondkannada.checked=false;
          this.$.thirdfrench.checked=false;
          this.$.thirdsanskrit.checked=false;
          this.$.thirdkannada.checked=false;
          this.$.thirdhindi.checked=false;
          this.$.admissiontestyes.checked=false;
          this.$.admissiontestno.checked=false;
          this.$.english.checked=false;
          this.$.maths.checked=false;
          this.$.evs.checked=false;
          //this.$.class.checked=false;
          this.prospectusno="";
          this.firstname="";
          this.middlename="";
          this.lastname="";
          this.textvalue="";
          this.textvalues="";
          fngender=null;
          admissiontest = null;
          this.grade="";
          this.oldclass="";
          this.oldschool="";
          mothertongue=null;
          this.fathername="";
          this.mothername="";
          this.fatheredu="";
          this.motheredu="";
          this.fathermob="";
          this.mothermob="";
          this.fathermail="";
          this.mothermail="";
          this.fathercompany="";
          this.guardiancompany="";
          this.mothercompany="";
          this.rtenumber="";
          dadoccup=null;
          guardianoccup == null;
          momtheroccup=null;
          this.flat="";
          this.address1="";
          this.address2="";
          this.address3="";
          this.city="";
          this.pincode="";
          this.state="";
          this.academicyear="";
          enquiysource=null;
          this.siblingname="";
          this.siblingdetails="";
          this.fathercountrycode="";
          this.mothercountrycode="";
          this.guardiancountrycode="";
          transportreq=null;
          canteenreq=null;
          secondlanguage=null;
          thirdlanguage=null;
          propsold=null;
          this.fatherjob="";
          this.motherjob="";
          dadincome=null;
          momincome=null;
          admissiontestenglish = null;
          admissiontestmaths = null;
          admissiontestevs = null;
          admissiontestdate = null;
          admissiontest = null;
          this.$.language.selected=-1;
         //this.$.grade.selected=-1;
          this.$.dadoccupation.selected=-1;
          this.$.guardianoccupation.selected=-1;
          this.$.motheroccupation.selected=-1;
          this.$.dadsalary.selected=-1;
          this.$.mothersalary.selected=-1;
          this.$.source.selected=-1;
          this.$.classes.selected=-1;
          this.$.country.selected=-1;
          this.$.transportyes.checked=false;
          //this.$.rtestudent.checked=false;
          this.$.transportno.checked=false;
          this.$.canteenyes.checked=false;
          this.$.canteenno.checked=false;
          this.$.prosoldyes.checked=false;
          this.$.prosoldno.checked=false;
          this.$.secondhindi.checked=false;
          this.$.secondkannada.checked=false;
          this.$.thirdfrench.checked=false;
          this.$.thirdsanskrit.checked=false;
          this.$.thirdkannada.checked=false;
          this.$.thirdhindi.checked=false;
          document.querySelector("#dfmale").checked=false;
          document.querySelector("#dffemale").checked=false;
          document.querySelector("#transportyes").checked=false;
          document.querySelector("#transportno").checked=false;
          document.querySelector("#canteenyes").checked=false;
          document.querySelector("#canteenno").checked=false;
          document.querySelector("#secondkannada").checked=false;
          document.querySelector("#secondhindi").checked=false;
          document.querySelector("#thirdhindi").checked=false;
          document.querySelector("#thirdkannada").checked=false;
          document.querySelector("#thirdsanskrit").checked=false;
          document.querySelector("#thirdfrench").checked=false;
          document.querySelector("#admissiontestyes").checked=false;
          document.querySelector("#admissiontestno").checked=false;
          document.querySelector("#english").checked=false;
          document.querySelector("#maths").checked=false;
          document.querySelector("#evs").checked=false;
          document.querySelector("#nextyear1").checked=false;
          document.querySelector("#midyear1").checked=false;
          //this.$.guardiansal.selected=-1;
      },
      search:function(){
        enqno=document.getElementById('searchtext').value;
        //alert(this.enqno+'    '+enqno);
        this.$.service.getenqirydetails(enqno);
      },
      guardianinfoHandler:function(){
        if(document.querySelector("#guardianinfo").checked==true){
          this.hideguardian=false;
          this.guardiansalaryinfo=true;
        } else {
          this.hideguardian=true;
          this.guardiansalaryinfo=true;
        }
      },
      Fnresult:function(dob,gender){
        var dt1=new Date(dob);

          var dt=new Date();
          var pr_year=dt.getFullYear();
          var bt_year=dt1.getFullYear();
          var diff=parseInt(pr_year - bt_year);
          this.ageofyr=diff+" Years";

          if(gender=='Male'){
            fngender="Male";
           document.querySelector("#dfmale").checked=true;
           document.querySelector("#dffemale").checked=false;
           }
           else{
            fngender="Female";
            document.querySelector("#dfmale").checked=false;
           document.querySelector("#dffemale").checked=true;
           }

      //document.querySelector('dateofbirth-datepicker').setdate(dob);
    },
    maleHandler:function(){
      if(document.querySelector("#dfmale").checked==true)
        {
         document.querySelector("#dffemale").checked=false;
         fngender="Male";

         //alert(gender);
       }
       else{
        fngender=null;
       }
    },
    dadmobverify:function(){
      if(this.fathermob.length<10){
        alert("Mobile Number Should be in 10 Digits");
        this.fathermob='';
        this.$.dadmob.validate();
      }
    },
    mommobverify:function(){
        if(this.mothermob.length<10){
        alert("Mobile Number Should be in 10 Digits");
        this.mothermob='';
        this.$.mommob.validate();
      }
    },
    guardmobverify:function(){
        if(this.guardianmobile.length<10){
        alert("Mobile Number Should be in 10 Digits");
        this.guardianmobile='';
        this.$.guardianmobile.validate();
      }
    },
    femaleHandler:function(){
      if(document.querySelector("#dffemale").checked==true){
         document.querySelector("#dfmale").checked=false;
         fngender="Female";
         //alert(gender);
       } else {
        fngender=null;
       }
    },
    admissiontestyesHandler:function(){
      if(document.querySelector("#admissiontestyes").checked==true)
      {
        document.querySelector("#admissiontestno").checked=false;
        admissiontest="Yes";
        this.admissiondetail=false;
      }
      else{
        admissiontest=null;
        this.admissiondetail=true;
      }
    } ,
      admissiontestnoHandler:function(){
        if(document.querySelector("#admissiontestno").checked==true)
        {
          document.querySelector("#admissiontestyes").checked=false;
          admissiontest="No";
          this.admissiondetail=true;
        }
        else{
          admissiontest=null;
        }
      } ,
    transportHandleryes:function(){
      if(document.querySelector("#transportyes").checked==true)
      {
        transportreq="Yes";
        document.querySelector("#transportno").checked=false;
      }
      else{
        transportreq=null;
      }
    },
    transportHandlerno:function(){
        if(document.querySelector("#transportno").checked==true)
      {
        transportreq="No";
        document.querySelector("#transportyes").checked=false;
      }
      else{
        transportreq=null;
      }

    },
    canteenHandleryes:function(){
      if(document.querySelector("#canteenyes").checked==true)
      {
        canteenreq="Yes";
        document.querySelector("#canteenno").checked=false;
      }
      else{
        canteenreq=null;
      }

    },
    canteenHandlerno:function(){
      if(document.querySelector("#canteenno").checked==true)
      {
        canteenreq="No";
        document.querySelector("#canteenyes").checked=false;
      }
      else{
        canteenreq=null;
      }
    },
    prosoldHandleryes:function(){
      if(document.querySelector("#prosoldyes").checked==true)
      {
        propsold="yes";
        document.querySelector("#prosoldno").checked=false;
        this.$.service.getprospectno();
        this.$.prospectno.hidden=false;
      }
      else{
        propsold=null;
        this.$.prospectno.hidden=true;
        this.prospectusno="";
      }
    },
    prosoldHandlerno:function(){
        if(document.querySelector("#prosoldno").checked==true)
      {
        propsold="no";
        document.querySelector("#prosoldyes").checked=false;
        this.$.prospectno.hidden=true;
        this.prospectusno="";
      }
      else{
        propsold=null;
      }

    },
    secondhindiHandler:function(){
      if(document.querySelector("#secondhindi").checked==true){
        secondlanguage="Hindi";
        document.querySelector("#secondkannada").checked=false;
        if(thirdlanguage=='Hindi'){
          alert("Kindly select different Second language");
          document.querySelector("#secondhindi").checked=false;
        }
      }
      else{
        secondlanguage=null;
      }
    },
    secondkannadaHandler:function(){
      if(document.querySelector("#secondkannada").checked==true){
        secondlanguage="Kannada";
        document.querySelector("#secondhindi").checked=false;
        if(thirdlanguage=='Kannada'){
          alert("Kindly select different Second language");
          document.querySelector("#secondkannada").checked=false;
        }
      }
      else{
        secondlanguage=null;
      }
    },
    thirdfrenchHandler:function(){
      if(document.querySelector("#thirdfrench").checked==true){
        thirdlanguage="French";
        document.querySelector("#thirdhindi").checked=false;
        document.querySelector("#thirdkannada").checked=false;
        document.querySelector("#thirdsanskrit").checked=false;
      }
      else{
        thirdlanguage=null;
      }
    },
    thirdhindiHandler:function(){
      if(document.querySelector("#thirdhindi").checked==true){
        if(secondlanguage=='Hindi'){
            alert("Kindly select different third language");
            document.querySelector("#thirdhindi").checked=false;
        }
        else{
            thirdlanguage="Hindi";
        }

        document.querySelector("#thirdfrench").checked=false;
        document.querySelector("#thirdkannada").checked=false;
        document.querySelector("#thirdsanskrit").checked=false;
      }
      else{
        thirdlanguage=null;
      }
    },
    thirdkannadaHandler:function(){
      if(document.querySelector("#thirdkannada").checked==true){
        if(secondlanguage=='Kannada'){
            alert("Kindly select different third language");
            document.querySelector("#thirdhindi").checked=false;
        }
        else{
            thirdlanguage="Kannada";
        }
        document.querySelector("#thirdfrench").checked=false;
        document.querySelector("#thirdhindi").checked=false;
        document.querySelector("#thirdsanskrit").checked=false;
      }
      else{
        thirdlanguage=null;
      }
    },
    thirdsanskritHandler:function(){
      if(document.querySelector("#thirdsanskrit").checked==true){
        thirdlanguage="Sanskrit";
        document.querySelector("#thirdfrench").checked=false;
        document.querySelector("#thirdhindi").checked=false;
        document.querySelector("#thirdkannada").checked=false;
      }
      else{
        thirdlanguage=null;
      }
    },
    englishHandler:function(){
      if(document.querySelector("#english").checked==true){
        admissiontestenglish="Yes";
      }
      else{
        admissiontestenglish=null;
      }
    },
      mathsHandler:function(){
        if(document.querySelector("#maths").checked==true){
          admissiontestmaths="Yes";
        } else {
          admissiontestmaths=null;
        }
      },
      evsHandler:function(){
        if(document.querySelector("#evs").checked==true){
          admissiontestevs="Yes";
        } else {
          admissiontestevs=null;
        }
      },
    source:function(e){
        enquiysource=(e.target.selectedItem.textContent).trim();
//alert(enquiysource);
        if(enquiysource=="Siblings"){
          this.$.sibname.hidden=false;
          this.$.sibdetail.hidden=false;
          this.$.referrer.hidden=true;
        }
        else if(enquiysource=="Referrer"){
          this.$.referrer.hidden=false;
          this.$.sibname.hidden=true;
          this.$.sibdetail.hidden=true;
           this.$.service.getreferrername();
        }
        else{
          this.$.sibname.hidden=true;
          this.$.sibdetail.hidden=true;
          this.$.referrer.hidden=true;
        }

    },
      getadmissiondate:function(date){
        admissiontestdate = localStorage.getItem("localsess_admission_date");
        //(admissiontestdate);
      },
    language:function(e){
        mothertongue=(e.target.selectedItem.textContent).trim();
    },
      classseeking:function(e){
        grade=(e.target.selectedItem.textContent).trim();
        if((grade=="Nursery")||(grade=="LKG")||(grade=="UKG")||(grade=="Grade-1")||(grade=="Grade-2")||(grade=="Grade-3")||(grade=="Grade-4")){
            this.$.thirdlanguage.hidden=true;
        }

        else{
            this.$.thirdlanguage.hidden=false;
        }

        switch(grade){
            case "Nursery":
                this.oldclass="Pre-Nursery";
                break;
            case "LKG":
                this.oldclass="Nursery";
                break;
            case "UKG":
                this.oldclass="LKG";
                break;
            case "Grade-1":
                this.oldclass="UKG";
                break;
            case "Grade-2":
                this.oldclass="Grade-1";
                break;
            case "Grade-3":
                this.oldclass="Grade-2";
                break;
            case "Grade-4":
                this.oldclass="Grade-3";
                break;
            case "Grade-5":
                this.oldclass="Grade-4";
                break;
            case "Grade-6":
                this.oldclass="Grade-5";
                break;
            case "Grade-7":
                this.oldclass="Grade-6";
                break;
            case "Grade-8":
                this.oldclass="Grade-7";
                break;
            case "Grade-9":
                this.oldclass="Grade-8";
                break;
            case "Grade-10":
                this.oldclass="Grade-9";
                break;
            case "Grade-11":
                this.oldclass="Grade-10";
                break;
            case "Grade-12":
                this.oldclass="Grade-11";
                break;

        }
      },
    submit:function(){
      // alert(fngender);
        if(this.firstname == "" || this.lastname == ""|| this.mothertongue == "" || this.fathername == "" || this.mothername == "" || this.fatheredu == "" || this.fathermob == "" || this.fathermail == "" || this.address1 == ""|| this.city == "" || this.pincode == "" || this.flat == "" || this.state == ""){
          this.$.fname.validate();
          //this.$.mname.validate();
          this.$.lname.validate();
          //this.$.grade.validate();
          //this.$.oldschool.validate();
          //this.$.oldclass.validate();
          this.$.dadname.validate();
          this.$.momname.validate();
          this.$.dadedu.validate();
          // this.$.momedu.validate();
          this.$.dadmob.validate();
          this.$.dadmail.validate();
          this.$.mommob.validate();
          this.$.flat.validate();
          this.$.add1.validate();
          //this.$.add2.validate();
          //this.$.add3.validate();
          this.$.city.validate();
          this.$.pin.validate();
          this.$.state.validate();
          this.$.locality.validate();
        }
        else if(fngender==null){
          alert('Select the gender of the student');
        }
        else if(enquiysource==null){
          alert('Select the enquiry source');
        }
        else if(grade==null){
          alert('Select the Class seeking for admission');
        }
        else if(mothertongue==null){
          alert('Select the mother tongue');
        }
        else if(transportreq==null){
          alert('Select the transport requirment');
        }
        else if(canteenreq==null){
          alert('Select the canteen requirment');
        }
        else if(secondlanguage==null){
          alert('Select the second language');
        }
        /*else if(thirdlanguage==null){
         alert('Select the third language');
         }*/
        else if(propsold==null){
          alert('Prospectus sold status is not marked');
        }
        else if(dadoccup==null){
          alert("Select Father's Occupation");
        }/*
         else if (guardianoccup == null) {
         alert("Select Guardian's Occupation");
         }*/
        else if (momtheroccup==null) {
          alert("Select Mother's Occupation");
        }
        else if(thirdlanguage==null){
          // alert(grade);

          if(grade == "Nursery"||"LKG"||"UKG"||"Grade-1"||"Grade-2"||"Grade-3"||"Grade-4"){
            //alert('coming');
            if (admissiontest == "Yes") {
              if(admissiontestenglish == null && admissiontestmaths == null && admissiontestevs == null){
                alert('Select at least any one subject ');
              } else {

                this.$.service.updateenquiryform(this.enqno,this.firstname,this.middlename,this.lastname,fngender,grade,dobdate,this.oldclass,this.oldschool,mothertongue,this.fathername,this.mothername,this.fatheredu,this.motheredu, this.fathercountrycode+"-"+this.fathermob, this.mothercountrycode+"-"+this.mothermob,this.fathermail,this.mothermail,this.fathercompany,this.mothercompany,dadoccup,momtheroccup,this.flat,this.address1,this.address2,this.address3,this.city,this.pincode,this.state,enquiysource,this.siblingname,this.siblingdetails,transportreq,canteenreq,secondlanguage,thirdlanguage,propsold,this.fatherjob,this.motherjob,dadincome,momincome,this.prospectusno,admissiontest,admissiontestdate,admissiontestenglish,admissiontestmaths,admissiontestevs, this.guardianname,this.guardiancountrycode+"-"+this.guardianmobile, this.guardianemail,this.guardiancompany,this.guardianjob,guardianoccup,guardianincome,this.textvalues,this.fatherotheroccupation,this.motherotheroccupation,this.guardianotheroccupation,country_name,this.rteno,checkList);

              }
            }
               else{
          this.$.service.updateenquiryform(this.enqno, this.firstname, this.middlename, this.lastname, fngender, grade, dobdate, this.oldclass, this.oldschool, mothertongue, this.fathername, this.mothername, this.fatheredu, this.motheredu, this.fathercountrycode + "-" + this.fathermob, this.mothercountrycode + "-" + this.mothermob, this.fathermail, this.mothermail, this.fathercompany, this.mothercompany, dadoccup, momtheroccup, this.flat, this.address1, this.address2, this.address3, this.city, this.pincode, this.state, enquiysource, this.siblingname, this.siblingdetails, transportreq, canteenreq, secondlanguage, thirdlanguage, propsold, this.fatherjob, this.motherjob, dadincome, momincome, this.prospectusno, admissiontest, admissiontestdate, admissiontestenglish, admissiontestmaths, admissiontestevs, this.guardianname, this.guardiancountrycode + "-" + this.guardianmobile, this.guardianemail, this.guardiancompany, this.guardianjob, guardianoccup, guardianincome, this.textvalues, this.fatherotheroccupation, this.motherotheroccupation, this.guardianotheroccupation, country_name,this.rteno,checkList);
        }
          } else {
            alert('Select the third language');
          }
        }
        else{
          //alert(enqno+this.firstname+this.middlename+this.lastname+fngender+this.grade+this.dob+this.oldclass+this.oldschool+mothertongue+this.fathername+this.mothername+this.fatheredu+this.motheredu+this.fathermob+this.mothermob+this.fathermail+this.mothermail+this.fathercompany+this.mothercompany+dadoccup+momtheroccup+this.flat+this.address1+this.address2+this.address3+this.city+this.pincode+this.state+enquiysource+this.siblingname+this.siblingdetails+transportreq+canteenreq+secondlanguage+thirdlanguage+propsold+this.fatherjob+this.motherjob+dadincome+momincome);
          if(admissiontest=="Yes"){
          if(admissiontestenglish == null && admissiontestmaths == null && admissiontestevs == null){
            alert('Select at least any one subject ');
          } else {
            this.$.service.updateenquiryform(this.enqno, this.firstname, this.middlename, this.lastname, fngender, grade, dobdate, this.oldclass, this.oldschool, mothertongue, this.fathername, this.mothername, this.fatheredu, this.motheredu, this.fathercountrycode + "-" + this.fathermob, this.mothercountrycode + "-" + this.mothermob, this.fathermail, this.mothermail, this.fathercompany, this.mothercompany, dadoccup, momtheroccup, this.flat, this.address1, this.address2, this.address3, this.city, this.pincode, this.state, enquiysource, this.siblingname, this.siblingdetails, transportreq, canteenreq, secondlanguage, thirdlanguage, propsold, this.fatherjob, this.motherjob, dadincome, momincome, this.prospectusno, admissiontest, admissiontestdate, admissiontestenglish, admissiontestmaths, admissiontestevs, this.guardianname, this.guardiancountrycode + "-" + this.guardianmobile, this.guardianemail, this.guardiancompany, this.guardianjob, guardianoccup, guardianincome, this.textvalues, this.fatherotheroccupation, this.motherotheroccupation, this.guardianotheroccupation, country_name,this.rteno,checkList);
          }
        }
        else{
          this.$.service.updateenquiryform(this.enqno, this.firstname, this.middlename, this.lastname, fngender, grade, dobdate, this.oldclass, this.oldschool, mothertongue, this.fathername, this.mothername, this.fatheredu, this.motheredu, this.fathercountrycode + "-" + this.fathermob, this.mothercountrycode + "-" + this.mothermob, this.fathermail, this.mothermail, this.fathercompany, this.mothercompany, dadoccup, momtheroccup, this.flat, this.address1, this.address2, this.address3, this.city, this.pincode, this.state, enquiysource, this.siblingname, this.siblingdetails, transportreq, canteenreq, secondlanguage, thirdlanguage, propsold, this.fatherjob, this.motherjob, dadincome, momincome, this.prospectusno, admissiontest, admissiontestdate, admissiontestenglish, admissiontestmaths, admissiontestevs, this.guardianname, this.guardiancountrycode + "-" + this.guardianmobile, this.guardianemail, this.guardiancompany, this.guardianjob, guardianoccup, guardianincome, this.textvalues, this.fatherotheroccupation, this.motherotheroccupation, this.guardianotheroccupation, country_name,this.rteno,checkList);
        }
      }

   // this.Fnclear();
},
dadoccupation:function(e){
  dadoccup=(e.target.selectedItem.textContent).trim();
if(dadoccup=="Self Employed"||dadoccup=="Public Sector"||dadoccup=="Private Sector"){
      /*this.$.dadoff.hidden=false;
      this.$.dadjob.hidden=false;
      this.$.dadsal.hidden=false;*/
      this.salaryinfo=false;
      this.fathersalaryinfo=false;
  } else if(dadoccup=="Others"){
    this.hidedadothers=false;/*
    this.$.dadoff.hidden=false;
    this.$.dadjob.hidden=false;
    this.$.dadsal.hidden=false;*/
    this.salaryinfo=false;
    this.fathersalaryinfo=false;
  }else {
      /*this.$.dadoff.hidden=true;
      this.$.dadjob.hidden=true;
      this.$.dadsal.hidden=true;*/
  if(momtheroccup=="Self Employed"||momtheroccup=="Public Sector"||momtheroccup=="Private Sector"||momtheroccup=="Others"){
    this.salaryinfo=false;
  } else {
    this.salaryinfo=true;
    this.fathersalaryinfo=true;
  }
      this.fathersalaryinfo=true;
      this.hidedadothers=true;

  }
},
  guardianoccupation:function(e){
        guardianoccup=(e.target.selectedItem.textContent).trim();
        if(guardianoccup=="Self Employed"||guardianoccup=="Public Sector"||guardianoccup=="Private Sector"){
          this.guardiansalaryinfo=false;
        }  else if(guardianoccup=="Others"){
          this.hideguardianothers=false;
          this.guardiansalaryinfo=false;
        }else{
          this.guardiansalaryinfo=true;

        }
      },
motheroccupation:function(e){
momtheroccup=(e.target.selectedItem.textContent).trim();
if(momtheroccup=="Self Employed"||momtheroccup=="Public Sector"||momtheroccup=="Private Sector"){
      /*this.$.momoff.hidden=false;
      this.$.momjob.hidden=false;
      this.$.momsal.hidden=false;*/
      this.salaryinfo=false;
      this.mothersalaryinfo=false;
} else if(momtheroccup=="Others"){
  this.salaryinfo=false;
  this.hidemotherothers=false;
  this.mothersalaryinfo=false;
  /*this.$.momoff.hidden=false;
  this.$.momjob.hidden=false;
  this.$.momsal.hidden=false;*/
}else{/*
      this.$.momoff.hidden=true;
      this.$.momjob.hidden=true;
      this.$.momsal.hidden=true;*/
      if(dadoccup=="Self Employed"||dadoccup=="Public Sector"||dadoccup=="Private Sector"||dadoccup=="Others"){
        this.salaryinfo=false;
      } else {
        this.salaryinfo=true;
        this.mothersalaryinfo=true;
      }
      this.mothersalaryinfo=true;
      this.hidemotherothers=true;
}
},
dadsalary:function(e){
  dadincome=(e.target.selectedItem.textContent).trim();
},
mothersalary:function(e){
  momincome=(e.target.selectedItem.textContent).trim();
},
      guardiansalary:function(e){
        guardianincome=(e.target.selectedItem.textContent).trim();
      },
Fnlistbox:function(nameitem){
          namearr=nameitem;
        },
        FnInputChanged:function(e){
          this.$.itemlist.hidden=false;
          if(e.keyCode==13|| e.keyCode==40)
            this.querySelector('paper-listbox').focus();

          var arr=[];
          arr.push({"itemdes":"-----Select-----"});
          this.querySelector('paper-listbox').style.visibility='visible';
          if(e.keyCode==8){
            this.itemflag="true";
            this.itemval="";
            //alert('yes');
            var len=(this.referrername).length;
            if(len<=1){
              this.querySelector('paper-listbox').style.visibility='hidden';
              this.itemArray="";
              this.itemval="";
            }
            if(len>1){
              this.querySelector('paper-listbox').style.visibility='visible';
              var backsubval=(((this.referrername).substring(0,(len-1))).trim()).toUpperCase();
              for(var i=0;i<namearr.length;i++)
              {
                var subval=((namearr[i].listname).trim()).substring(0,backsubval.length);
                if((namearr[i].listname).toUpperCase().indexOf((this.refferername).toUpperCase())!=-1)
                {
                  var obj={"itemdes":""};
                  obj.itemdes=namearr[i].listname;
                  arr.push(obj);
                }
              }
              this.itemArray=arr;
            }
          }
          if(e.keyCode!=8&& e.keyCode!=16&& e.keyCode!=13 && e.keyCode!=38&&e.keyCode!=40&&e.keyCode!=37&&e.keyCode!=39){
            if(this.itemflag=="true") {
              this.itemval = (this.referrername).toUpperCase()+String.fromCharCode((e.keyCode)).toUpperCase();
              this.itemflag="false";
            }
            else
            this.itemval = this.referrername +String.fromCharCode((e.keyCode));
            if(this.itemval.length>0)
            {
              for(var i=0;i<namearr.length;i++){
                var subval=((namearr[i].listname).trim()).substring(0,this.itemval.length);
                if((namearr[i].listname).toUpperCase().indexOf((this.itemval).toUpperCase())!=-1)
                {
                  var obj={"itemdes":""};
                  obj.itemdes=namearr[i].listname;
                  arr.push(obj);
                }
              }
              if(arr.length>0)
                this.itemArray=arr;
              else {
                var obj={"itemdes":""};
                  obj.itemdes="NO Item Found";
                  arr.push(obj);
                this.itemArray=arr;
              }
            }
          }

        },
        Fnselected:function(e)
        {
          //alert('s');
          this.querySelector('paper-listbox').style.visibility='hidden';
          this.referrername = e.target.selectedItem.textContent.trim();
          this.itemArray=[];
          document.querySelector('#itemlist').selected=-1;
          this.$.itemlist.hidden=true;
        },
      setenqno:function(enqno){
        document.getElementById('searchtext').value=enqno;
      },
      newenquriy:function(){

        this.$.searchenq.hidden=true;
        this.$.newenq.hidden=false;
        this.$.searchtext.hidden=true;
        this.$.searchenquiry.hidden=true;
        this.$.newenquiry.hidden=true;
        this.guardianinfo=false;
        this.academicyearhide=false;


      },
      register:function() {
        this.$.service.getenquiryno();
      },
      FnSelectEnquiry:function(e){
        var enquiry=(e.target.selectedItem.textContent).trim();
        var inx=enquiry.indexOf('-');
        var enquiry_no=enquiry.substring(0,inx);
        var enquiry_name=enquiry.substring(inx+1);
        localStorage.setItem("curr_sess_enquiryno",enquiry_no);
        localStorage.setItem("curr_sess_enquiryname",enquiry_name);
        this.$.service.callFetchenquiryinfoService();
      },
      dateclear:function(){
        alert("Select DOB properly, it cannot be future date");

      },
       getdate:function(dates){
          var dt1=new Date(dates);
          dobdate=dates;
          var dt=new Date();
          var pr_year=dt.getFullYear();
          var bt_year=dt1.getFullYear();
          var diff=parseInt(pr_year-bt_year);
          //alert(diff);
          this.ageofyr=diff+" Years";
          this.$.service.verifyage(grade,diff);
       },
      Fngrade:function(grades){

        this.grades = grades;
       /* if(rte!=null){
          alert(rte);
            document.querySelector('#rtestudent').checked=true;
            rtevalue=rte;
            this.$.rtereference.hidden=false;
        }
        else{
          alert(' v  j');
            document.querySelector('#rtestudent').checked=false;
            rtevalue=null;
            this.$.rtereference.hidden=true;
        }*/
      },
      complete:function(){
        var enqnumber = document.getElementById('searchtext').value;
          if (this.firstname == "" || this.lastname == "" || this.mothertongue == "" || this.fathername == "" || this.mothername == "" || this.fatheredu == "" || this.motheredu == "" || this.fathermob == "" || this.mothermob == "" || this.fathermail == "" || this.address1 == "" || this.city == "" || this.pincode == "" || this.flat == "" || this.state == "") {
            this.$.fname.validate();
            //this.$.mname.validate();
            this.$.lname.validate();
            //this.$.grade.validate();
            //this.$.oldschool.validate();
            //this.$.oldclass.validate();
            this.$.dadname.validate();
            this.$.momname.validate();
            this.$.dadedu.validate();
            this.$.momedu.validate();
            this.$.dadmob.validate();
            this.$.dadmail.validate();
            this.$.mommob.validate();
            this.$.flat.validate();
            this.$.add1.validate();
            //this.$.add2.validate();
            //this.$.add3.validate();
            this.$.city.validate();
            this.$.pin.validate();
            this.$.state.validate();
            this.$.locality.validate();
          }
          else if (admissiontest == null) {
            alert('Please select admission test required or not');
          }
          else if (fngender == null) {
            alert('Select the gender of the student');
          }
          else if (enquiysource == null) {
            alert('Select the enquiry source');
          }
          else if (grade == null) {
            alert('Select the Class seeking for admission');
          }
          else if (mothertongue == null) {
            alert('Select the mother tongue');
          }
          else if (transportreq == null) {
            alert('Select the transport requirment');
          }
          else if (canteenreq == null) {
            alert('Select the canteen requirment');
          }
          else if (secondlanguage == null) {
            alert('Select the second language');
          }
          /*else if (thirdlanguage == null) {
           alert('Select the third language');
           }*/
          else if (propsold == null) {
            alert('Prospectus sold status is not marked');
          }
          else if (dadoccup == null) {
            alert("Select Father's Occupation");
          }
          else if(enrolltype==null){
            alert('Select the Academics Year Type');
          }
          /*
           else if (guardianoccup == null) {
           alert("Select Guardian's Occupation");
           }*/
          else if (momtheroccup == null) {
            alert("Select Mother's Occupation");
          }
          else if (thirdlanguage == null) {
            if (grade == "Pre KG" || "LKG" || "UKG" || "Grade 1" || "Grade 2" || "Grade 3" ||"Grade-4") {
              if (admissiontest == "Yes") {
                if(admissiontestenglish == null && admissiontestmaths == null && admissiontestevs == null){
                  alert('Select at least any one subject ');
                } else {
                  this.$.service.registerenquiryform(this.enqno, this.firstname, this.middlename, this.lastname, fngender, grade, dobdate, this.oldclass, this.oldschool, mothertongue, this.fathername, this.mothername, this.fatheredu, this.motheredu, this.fathercountrycode + "-" + this.fathermob, this.mothercountrycode + "-" + this.mothermob, this.fathermail, this.mothermail, this.fathercompany, this.mothercompany, dadoccup, momtheroccup, this.flat, this.address1, this.address2, this.address3, this.city, this.pincode, this.state, enquiysource, this.siblingname, this.siblingdetails, transportreq, canteenreq, secondlanguage, thirdlanguage, propsold, this.fatherjob, this.motherjob, dadincome, momincome, this.prospectusno, this.academicyear,admissiontest, admissiontestdate, admissiontestenglish, admissiontestmaths, admissiontestevs, this.guardianname, this.guardiancountrycode + "-" + this.guardianmobile, this.guardianemail, this.guardiancompany, this.guardianjob, guardianoccup, guardianincome, this.textvalues, this.fatherotheroccupation, this.motherotheroccupation, this.guardianotheroccupation, enrolltype, country_name,this.rteno,checkList,attendername);
                }
              } else {
                this.$.service.registerenquiryform(this.enqno, this.firstname, this.middlename, this.lastname, fngender, grade, dobdate, this.oldclass, this.oldschool, mothertongue, this.fathername, this.mothername, this.fatheredu, this.motheredu, this.fathercountrycode + "-" + this.fathermob, this.mothercountrycode + "-" + this.mothermob, this.fathermail, this.mothermail, this.fathercompany, this.mothercompany, dadoccup, momtheroccup, this.flat, this.address1, this.address2, this.address3, this.city, this.pincode, this.state, enquiysource, this.siblingname, this.siblingdetails, transportreq, canteenreq, secondlanguage, thirdlanguage, propsold, this.fatherjob, this.motherjob, dadincome, momincome, this.prospectusno, this.academicyear,admissiontest, admissiontestdate, admissiontestenglish, admissiontestmaths, admissiontestevs, this.guardianname, this.guardiancountrycode + "-" + this.guardianmobile, this.guardianemail, this.guardiancompany, this.guardianjob, guardianoccup, guardianincome, this.textvalues, this.fatherotheroccupation, this.motherotheroccupation, this.guardianotheroccupation, enrolltype, country_name,this.rteno,checkList,attendername);
              }
            } else {
              alert('Select the third language');
            }
          } else {
            //alert(enqno+this.firstname+this.middlename+this.lastname+fngender+this.grade+this.dob+this.oldclass+this.oldschool+mothertongue+this.fathername+this.mothername+this.fatheredu+this.motheredu+this.fathermob+this.mothermob+this.fathermail+this.mothermail+this.fathercompany+this.mothercompany+dadoccup+momtheroccup+this.flat+this.address1+this.address2+this.address3+this.city+this.pincode+this.state+enquiysource+this.siblingname+this.siblingdetails+transportreq+canteenreq+secondlanguage+thirdlanguage+propsold+this.fatherjob+this.motherjob+dadincome+momincome);
            if (admissiontest == "Yes") {
              if (admissiontestenglish == null && admissiontestmaths == null && admissiontestevs == null) {
                alert('Select at least any one subject ');
              } else {
                this.$.service.registerenquiryform(this.enqno, this.firstname, this.middlename, this.lastname, fngender, grade, dobdate, this.oldclass, this.oldschool, mothertongue, this.fathername, this.mothername, this.fatheredu, this.motheredu, this.fathercountrycode + "-" + this.fathermob, this.mothercountrycode + "-" + this.mothermob, this.fathermail, this.mothermail, this.fathercompany, this.mothercompany, dadoccup, momtheroccup, this.flat, this.address1, this.address2, this.address3, this.city, this.pincode, this.state, enquiysource, this.siblingname, this.siblingdetails, transportreq, canteenreq, secondlanguage, thirdlanguage, propsold, this.fatherjob, this.motherjob, dadincome, momincome, this.prospectusno, this.academicyear, admissiontest, admissiontestdate, admissiontestenglish, admissiontestmaths, admissiontestevs, this.guardianname, this.guardiancountrycode + "-" + this.guardianmobile, this.guardianemail, this.guardiancompany, this.guardianjob, guardianoccup, guardianincome, this.textvalues, this.fatherotheroccupation, this.motherotheroccupation, this.guardianotheroccupation, enrolltype, country_name, this.rteno, checkList,attendername);
              }
            } else {
              this.$.service.registerenquiryform(this.enqno, this.firstname, this.middlename, this.lastname, fngender, grade, dobdate, this.oldclass, this.oldschool, mothertongue, this.fathername, this.mothername, this.fatheredu, this.motheredu, this.fathercountrycode + "-" + this.fathermob, this.mothercountrycode + "-" + this.mothermob, this.fathermail, this.mothermail, this.fathercompany, this.mothercompany, dadoccup, momtheroccup, this.flat, this.address1, this.address2, this.address3, this.city, this.pincode, this.state, enquiysource, this.siblingname, this.siblingdetails, transportreq, canteenreq, secondlanguage, thirdlanguage, propsold, this.fatherjob, this.motherjob, dadincome, momincome, this.prospectusno, this.academicyear, admissiontest, admissiontestdate, admissiontestenglish, admissiontestmaths, admissiontestevs, this.guardianname, this.guardiancountrycode + "-" + this.guardianmobile, this.guardianemail, this.guardiancompany, this.guardianjob, guardianoccup, guardianincome, this.textvalues, this.fatherotheroccupation, this.motherotheroccupation, this.guardianotheroccupation, enrolltype, country_name, this.rteno, checkList,attendername);
            }
          }
      },
      autocompletenames(nameitem){
      namearrs=nameitem;
    },
      FnInputChanged1:function(e){
        this.$.itemlists.hidden=false;
        if(e.keyCode==13|| e.keyCode==40)
          this.querySelector('paper-listbox').focus();
        var arr=[];
        arr.push({"itemdes":"-----Select-----"});
        this.querySelector('paper-listbox').style.visibility='visible';
        if(e.keyCode==8){
          this.itemflag="true";
          this.itemval="";
          //alert('yes');
          var len=(this.textvalues).length;
          if(len<=1){
            this.querySelector('paper-listbox').style.visibility='hidden';
            this.itemArray="";
            this.itemval="";
          }
          if(len>1){
            this.querySelector('paper-listbox').style.visibility='visible';
            var backsubval=(((this.textvalues).substring(0,(len-1))).trim()).toUpperCase();
            for(var i=0;i<namearrs.length;i++)
            {
              var subval=((namearrs[i].habitat_name).trim()).substring(0,backsubval.length);
              if((subval).toUpperCase()==(backsubval).toUpperCase())
              {
                var obj={"itemdes":"","itemid":""};
                obj.itemdes=namearrs[i].habitat_name;
                obj.itemid=namearrs[i].habitat_id;
                arr.push(obj);
              }
            }
            this.itemArray=arr;
          }
        }
        if(e.keyCode!=8&& e.keyCode!=16&& e.keyCode!=13 && e.keyCode!=38&&e.keyCode!=40&&e.keyCode!=37&&e.keyCode!=39){
          if(this.itemflag=="true") {
            this.itemval = (this.textvalues).toUpperCase()+String.fromCharCode((e.keyCode)).toUpperCase();
            this.itemflag="false";
          }
          else
            this.itemval = this.textvalues +String.fromCharCode((e.keyCode));
          if(this.itemval.length>0)
          {
            for(var i=0;i<namearrs.length;i++){
              var subval=((namearrs[i].habitat_name).trim()).substring(0,this.itemval.length);
              if((subval).toUpperCase()==(this.itemval).toUpperCase()){
                var obj={"itemdes":"","itemid":""};
                obj.itemdes=namearrs[i].habitat_name;
                obj.itemid=namearrs[i].habitat_id;
                arr.push(obj);
              }
            }
            if(arr.length>0)
              this.itemArray=arr;
            else {
              var obj={"itemdes":"","itemid":""};
              obj.itemdes=namearrs[i].habitat_name;
              obj.itemid=namearrs[i].habitat_id;
              arr.push(obj);
              this.itemArray=arr;
            }
          }
        }

      },

      Fnshowguardian:function(){
        this.hideguardian=false;
      },
      Fnselected1:function(e)
      {
        //alert('s');
        this.querySelector('paper-listbox').style.visibility='hidden';
        this.textvalues = e.target.selectedItem.textContent.trim();
        this.itemArray=[];
        document.querySelector('#itemlists').selected=-1;
        this.$.itemlists.hidden=true;
      },
    nextyearfhandler:function(){
      if(document.querySelector('#nextyear1').checked==true){
        document.querySelector('#midyear1').checked=false;
        enrolltype="fullyear";
        //alert(enrolltype);
        var dt=new Date();
        //alert(month);
        yr1=(dt.getFullYear()+1)-2000;
        yr2=(dt.getFullYear()+2)-2000;
        yearsxz='AY-'+(dt.getFullYear()+1)+'-'+(dt.getFullYear()+2);
        //alert(yearsxz);
        this.academicyear=yearsxz;
      }
      else{
        enrolltype=null;
        this.academicyear="";
      }
    },/*
    rteHandler:function(){
      if(document.querySelector("#rtestud").checked==true){
        alert('hi');
        rtevalue="RTE Student";
        this.$.rtereference.hidden=false;
      } else {
        this.$.rtereference.hidden=true;
        this.rteno="";
        rtevalue=null;
      }
      for(var i=0; i<checkList.length; i++){
        if(checkList[i] == 1){
          this.$.rtereference.hidden=false;
          this.$.rtereference.validate();
        }
      }
    },*/
    rteUnchecked:function(){
      this.$.rtereference.hidden=true;
    },
    getItems:function(codes){
      checkList.push(codes);
      for(var i=0; i<checkList.length; i++){
        if(checkList[i] == 1){
          this.rteHandler();
        }
      }
    },
    removeItems:function(code){
      for(var i=0;i<checkList.length;i++){
        if(code==checkList[i].codes){
          if(checkList[i] == 1){
            this.rteUnchecked();
          }
          checkList.splice(i,1);
        }
      }
    },
    revertNewenquiry:function(){
      this.$.searchenq.hidden=false;
      this.$.newenq.hidden=true;
      this.$.searchtext.hidden=false;
      this.$.searchenquiry.hidden=false;
      this.$.newenquiry.hidden=false;
      this.guardianinfo=true;
      this.academicyearhide=true;
    },
    midyearfhandler:function(){
      if(document.querySelector('#midyear1').checked==true){
        document.querySelector('#nextyear1').checked=false;
        enrolltype="midyear";
        //alert(enrolltype);
        var dt=new Date();
        var month=dt.getMonth()+1;
        //alert(month);
        yr1=(dt.getFullYear())-2000;
        yr2=(dt.getFullYear()+1)-2000;
        yearsxz='AY-'+dt.getFullYear()+'-'+(dt.getFullYear()+1);
        //alert(yearsxz);
        this.academicyear=yearsxz;
      }
      else{
        enrolltype=null;
        this.academicyear="";
      }
    },
      rteHandler:function(){
        this.$.rtereference.hidden = true;
      },
      attendedby:function(e){
          attendername=(e.target.selectedItem.textContent).trim();
      },
      Fnenqsource:function(source){
            enquiysource=source;
            this.enqsource=source;
//alert(enquiysource);
        if(enquiysource=="Siblings"){
          this.$.sibname.hidden=false;
          this.$.sibdetail.hidden=false;
          this.$.referrer.hidden=true;
        }
        else if(enquiysource=="Referrer"){
          this.$.referrer.hidden=false;
          this.$.sibname.hidden=true;
          this.$.sibdetail.hidden=true;
           this.$.service.getreferrername();
        }
        else{
          this.$.sibname.hidden=true;
          this.$.sibdetail.hidden=true;
          this.$.referrer.hidden=true;
        }
      },
      Fnsource:function(source1,source2){
        this.enqsource1=source1;
        this.enqsource2=source2;
      }
    });
  })();
  </script>
</dom-module>